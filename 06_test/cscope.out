cscope 15 $HOME/12_bigfish/bigfish/06_test -q 0000000338 0000024734
	@demo.people.pb.cc

3 
	#INTERNAL_SUPPRESS_PROTOBUF_FIELD_DEPRECATION


	)

4 
	~"demo.³İË.pb.h
"

6 
	~<®gÜ™hm
>

8 
	~<googË/´Ùobuf/¡ubs/Úû.h
>

9 
	~<googË/´Ùobuf/io/coded_¡»am.h
>

10 
	~<googË/´Ùobuf/wœe_fÜm©_l™e_šl.h
>

11 
	~<googË/´Ùobuf/desütÜ.h
>

12 
	~<googË/´Ùobuf/»æeùiÚ_İs.h
>

13 
	~<googË/´Ùobuf/wœe_fÜm©.h
>

16 
Çme¥aû
 
	gdemo
 {

18 
	gÇme¥aû
 {

20 cÚ¡ ::
googË
::
´Ùobuf
::
DesütÜ
* 
PeİË_desütÜ_
 = 
NULL
;

21 cÚ¡ ::
googË
::
´Ùobuf
::
š‹º®
::
G’”©edMes§geReæeùiÚ
*

22 
PeİË_»æeùiÚ_
 = 
NULL
;

27 
´Ùobuf_AssignDesc_demo_2•eİË_2•rÙo
() {

28 
´Ùobuf_AddDesc_demo_2•eİË_2•rÙo
();

29 cÚ¡ ::
googË
::
´Ùobuf
::
FeDesütÜ
* 
fe
 =

30 ::
googË
::
´Ùobuf
::
DesütÜPoŞ
::
g’”©ed_poŞ
()->
FšdFeByName
(

32 
GOOGLE_CHECK
(
fe
 !ğ
NULL
);

33 
	gPeİË_desütÜ_
 = 
fe
->
mes§ge_ty³
(0);

34 cÚ¡ 
	gPeİË_off£ts_
[3] = {

35 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
PeİË
, 
Çme_
),

36 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
PeİË
, 
id_
),

37 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
PeİË
, 
ema_
),

39 
	gPeİË_»æeùiÚ_
 =

40 
Ãw
 ::
googË
::
´Ùobuf
::
š‹º®
::
G’”©edMes§geReæeùiÚ
(

41 
PeİË_desütÜ_
,

42 
PeİË
::
deçuÉ_š¡ªû_
,

43 
PeİË_off£ts_
,

44 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
PeİË
, 
_has_b™s_
[0]),

45 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
PeİË
, 
_unknown_f›lds_
),

47 ::
googË
::
´Ùobuf
::
DesütÜPoŞ
::
g’”©ed_poŞ
(),

48 ::
googË
::
´Ùobuf
::
Mes§geFaùÜy
::
g’”©ed_çùÜy
(),

49 (
PeİË
));

52 
	gÇme¥aû
 {

54 
GOOGLE_PROTOBUF_DECLARE_ONCE
(
´Ùobuf_AssignDesütÜs_Úû_
);

55 
šlše
 
´Ùobuf_AssignDesütÜsOnû
() {

56 ::
googË
::
´Ùobuf
::
GoogËOnûIn™
(&
´Ùobuf_AssignDesütÜs_Úû_
,

57 &
´Ùobuf_AssignDesc_demo_2•eİË_2•rÙo
);

60 
´Ùobuf_Regi¡”Ty³s
(cÚ¡ ::
¡d
::
¡ršg
&) {

61 
´Ùobuf_AssignDesütÜsOnû
();

62 ::
googË
::
´Ùobuf
::
Mes§geFaùÜy
::
IÁ”ÇlRegi¡”G’”©edMes§ge
(

63 
PeİË_desütÜ_
, &
PeİË
::
deçuÉ_š¡ªû
());

68 
´Ùobuf_ShutdownFe_demo_2•eİË_2•rÙo
() {

69 
d–‘e
 
	gPeİË
::
deçuÉ_š¡ªû_
;

70 
d–‘e
 
	gPeİË_»æeùiÚ_
;

73 
´Ùobuf_AddDesc_demo_2•eİË_2•rÙo
() {

74 
boŞ
 
	g®»ady_h”e
 = 
çl£
;

75 ià(
	g®»ady_h”e
) ;

76 
	g®»ady_h”e
 = 
Œue
;

77 
	gGOOGLE_PROTOBUF_VERIFY_VERSION
;

79 ::
googË
::
´Ùobuf
::
DesütÜPoŞ
::
IÁ”ÇlAddG’”©edFe
(

82 ::
googË
::
´Ùobuf
::
Mes§geFaùÜy
::
IÁ”ÇlRegi¡”G’”©edFe
(

83 "demo.³İË.´Ùo", &
´Ùobuf_Regi¡”Ty³s
);

84 
	gPeİË
::
deçuÉ_š¡ªû_
 = 
Ãw
 
PeİË
();

85 
	gPeİË
::
deçuÉ_š¡ªû_
->
In™AsDeçuÉIn¡ªû
();

86 ::
googË
::
´Ùobuf
::
š‹º®
::
OnShutdown
(&
´Ùobuf_ShutdownFe_demo_2•eİË_2•rÙo
);

90 
	sSticDesütÜIn™Ÿliz”_demo_2•eİË_2•rÙo
 {

91 
SticDesütÜIn™Ÿliz”_demo_2•eİË_2•rÙo
() {

92 
´Ùobuf_AddDesc_demo_2•eİË_2•rÙo
();

94 } 
	g¡©ic_desütÜ_š™Ÿliz”_demo_2•eİË_2•rÙo_
;

99 #iâdeà
_MSC_VER


100 cÚ¡ 
	gPeİË
::
kNameF›ldNumb”
;

101 cÚ¡ 
	gPeİË
::
kIdF›ldNumb”
;

102 cÚ¡ 
	gPeİË
::
kEmaF›ldNumb”
;

105 
	gPeİË
::
PeİË
()

106 : ::
googË
::
´Ùobuf
::
Mes§ge
() {

107 
Sh¬edCtÜ
();

110 
	gPeİË
::
In™AsDeçuÉIn¡ªû
() {

113 
PeİË
::PeİË(cÚ¡ PeİË& 
äom
)

114 : ::
googË
::
´Ùobuf
::
Mes§ge
() {

115 
Sh¬edCtÜ
();

116 
M”geFrom
(
äom
);

119 
	gPeİË
::
Sh¬edCtÜ
() {

120 
_ÿched_size_
 = 0;

121 
	gÇme_
 = 
cÚ¡_ÿ¡
< ::
¡d
::
¡ršg
*>(&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
);

122 
	gid_
 = 0;

123 
	gema_
 = 
cÚ¡_ÿ¡
< ::
¡d
::
¡ršg
*>(&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
);

124 ::
mem£t
(
_has_b™s_
, 0, (_has_bits_));

127 
	gPeİË
::~
PeİË
() {

128 
Sh¬edDtÜ
();

131 
	gPeİË
::
Sh¬edDtÜ
() {

132 ià(
Çme_
 !ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

133 
d–‘e
 
Çme_
;

135 ià(
	gema_
 !ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

136 
d–‘e
 
ema_
;

138 ià(
	gthis
 !ğ
deçuÉ_š¡ªû_
) {

142 
	gPeİË
::
S‘CachedSize
(
size
) const {

143 
GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN
();

144 
	g_ÿched_size_
 = 
size
;

145 
GOOGLE_SAFE_CONCURRENT_WRITES_END
();

147 cÚ¡ ::
googË
::
´Ùobuf
::
DesütÜ
* 
PeİË
::
desütÜ
() {

148 
´Ùobuf_AssignDesütÜsOnû
();

149  
	gPeİË_desütÜ_
;

152 cÚ¡ 
	gPeİË
& PeİË::
deçuÉ_š¡ªû
() {

153 ià(
deçuÉ_š¡ªû_
 =ğ
NULL
è
´Ùobuf_AddDesc_demo_2•eİË_2•rÙo
();  *
	gdeçuÉ_š¡ªû_
;

156 
PeİË
* 
	gPeİË
::
deçuÉ_š¡ªû_
 = 
NULL
;

158 
PeİË
* 
	gPeİË
::
New
() const {

159  
Ãw
 
PeİË
;

162 
	gPeİË
::
CË¬
() {

163 ià(
_has_b™s_
[0 / 32] & (0xffu << (0 % 32))) {

164 ià(
has_Çme
()) {

165 ià(
Çme_
 !ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

166 
Çme_
->
ş—r
();

169 
	gid_
 = 0;

170 ià(
has_ema
()) {

171 ià(
	gema_
 !ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

172 
ema_
->
ş—r
();

176 ::
mem£t
(
_has_b™s_
, 0, (_has_bits_));

177 
mubË_unknown_f›lds
()->
CË¬
();

180 
boŞ
 
	gPeİË
::
M”geP¬tŸlFromCodedSŒ—m
(

181 ::
googË
::
´Ùobuf
::
io
::
CodedIÅutSŒ—m
* 
šput
) {

182 
	#DO_
(
EXPRESSION
èià(!(EXPRESSION)è 
çl£


	)

183 ::
googË
::
´Ùobuf
::
ušt32
 
g
;

184 (
	gg
 = 
šput
->
R—dTag
()) != 0) {

185 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagF›ldNumb”
(
g
)) {

188 ià(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagWœeTy³
(
g
) ==

189 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
WIRETYPE_LENGTH_DELIMITED
) {

190 
DO_
(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
R—dSŒšg
(

191 
šput
, 
this
->
mubË_Çme
()));

192 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
V”ifyUTF8SŒšg
(

193 
this
->
Çme
().
d©a
(),his->Çme().
Ëngth
(),

194 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
PARSE
);

196 
	ghªdË_unš‹½»‹d
;

198 ià(
	gšput
->
Ex³ùTag
(16)è
	g·r£_id
;

204 ià(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagWœeTy³
(
g
) ==

205 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
WIRETYPE_VARINT
) {

206 
·r£_id
:

207 
DO_
((::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
R—dPrim™ive
<

208 ::
googË
::
´Ùobuf
::
št32
, ::googË::´Ùobuf::
š‹º®
::
WœeFÜm©L™e
::
TYPE_INT32
>(

209 
šput
, &
id_
)));

210 
£t_has_id
();

212 
	ghªdË_unš‹½»‹d
;

214 ià(
	gšput
->
Ex³ùTag
(26)è
	g·r£_ema
;

220 ià(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagWœeTy³
(
g
) ==

221 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
WIRETYPE_LENGTH_DELIMITED
) {

222 
·r£_ema
:

223 
DO_
(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
R—dSŒšg
(

224 
šput
, 
this
->
mubË_ema
()));

225 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
V”ifyUTF8SŒšg
(

226 
this
->
ema
().
d©a
(),his->ema().
Ëngth
(),

227 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
PARSE
);

229 
	ghªdË_unš‹½»‹d
;

231 ià(
	gšput
->
Ex³ùAtEnd
()è 
	gŒue
;

236 
hªdË_unš‹½»‹d
:

237 ià(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagWœeTy³
(
g
) ==

238 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
WIRETYPE_END_GROUP
) {

239  
Œue
;

241 
DO_
(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
SkF›ld
(

242 
šput
, 
g
, 
mubË_unknown_f›lds
()));

247  
	gŒue
;

248 #undeà
DO_


251 
	gPeİË
::
S”ŸlizeW™hCachedSizes
(

252 ::
googË
::
´Ùobuf
::
io
::
CodedOuutSŒ—m
* 
ouut
) const {

254 ià(
has_Çme
()) {

255 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
V”ifyUTF8SŒšg
(

256 
this
->
Çme
().
d©a
(),his->Çme().
Ëngth
(),

257 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
SERIALIZE
);

258 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eSŒšg
(

259 1, 
this
->
Çme
(), 
ouut
);

263 ià(
has_id
()) {

264 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eIÁ32
(2, 
this
->
id
(), 
ouut
);

268 ià(
has_ema
()) {

269 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
V”ifyUTF8SŒšg
(

270 
this
->
ema
().
d©a
(),his->ema().
Ëngth
(),

271 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
SERIALIZE
);

272 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eSŒšg
(

273 3, 
this
->
ema
(), 
ouut
);

276 ià(!
unknown_f›lds
().
em±y
()) {

277 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
S”ŸlizeUnknownF›lds
(

278 
unknown_f›lds
(), 
ouut
);

282 ::
googË
::
´Ùobuf
::
ušt8
* 
PeİË
::
S”ŸlizeW™hCachedSizesToA¼ay
(

283 ::
googË
::
´Ùobuf
::
ušt8
* 
rg‘
) const {

285 ià(
has_Çme
()) {

286 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
V”ifyUTF8SŒšg
(

287 
this
->
Çme
().
d©a
(),his->Çme().
Ëngth
(),

288 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
SERIALIZE
);

289 
	grg‘
 =

290 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eSŒšgToA¼ay
(

291 1, 
this
->
Çme
(), 
rg‘
);

295 ià(
has_id
()) {

296 
	grg‘
 = ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eIÁ32ToA¼ay
(2, 
this
->
id
(), 
rg‘
);

300 ià(
has_ema
()) {

301 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
V”ifyUTF8SŒšg
(

302 
this
->
ema
().
d©a
(),his->ema().
Ëngth
(),

303 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
SERIALIZE
);

304 
	grg‘
 =

305 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eSŒšgToA¼ay
(

306 3, 
this
->
ema
(), 
rg‘
);

309 ià(!
unknown_f›lds
().
em±y
()) {

310 
	grg‘
 = ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
S”ŸlizeUnknownF›ldsToA¼ay
(

311 
unknown_f›lds
(), 
rg‘
);

313  
	grg‘
;

316 
	gPeİË
::
By‹Size
() const {

317 
tÙ®_size
 = 0;

319 ià(
	g_has_b™s_
[0 / 32] & (0xffu << (0 % 32))) {

321 ià(
has_Çme
()) {

322 
	gtÙ®_size
 += 1 +

323 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
SŒšgSize
(

324 
this
->
Çme
());

328 ià(
has_id
()) {

329 
	gtÙ®_size
 += 1 +

330 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
IÁ32Size
(

331 
this
->
id
());

335 ià(
has_ema
()) {

336 
	gtÙ®_size
 += 1 +

337 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
SŒšgSize
(

338 
this
->
ema
());

342 ià(!
unknown_f›lds
().
em±y
()) {

343 
	gtÙ®_size
 +=

344 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
Compu‹UnknownF›ldsSize
(

345 
unknown_f›lds
());

347 
GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN
();

348 
	g_ÿched_size_
 = 
tÙ®_size
;

349 
GOOGLE_SAFE_CONCURRENT_WRITES_END
();

350  
	gtÙ®_size
;

353 
	gPeİË
::
M”geFrom
(cÚ¡ ::
googË
::
´Ùobuf
::
Mes§ge
& 
äom
) {

354 
GOOGLE_CHECK_NE
(&
äom
, 
this
);

355 cÚ¡ 
PeİË
* 
	gsourû
 =

356 ::
googË
::
´Ùobuf
::
š‹º®
::
dyÇmic_ÿ¡_if_avaabË
<cÚ¡ 
PeİË
*>(

357 &
äom
);

358 ià(
	gsourû
 =ğ
NULL
) {

359 ::
googË
::
´Ùobuf
::
š‹º®
::
ReæeùiÚOps
::
M”ge
(
äom
, 
this
);

361 
M”geFrom
(*
sourû
);

365 
	gPeİË
::
M”geFrom
(cÚ¡ 
PeİË
& 
äom
) {

366 
GOOGLE_CHECK_NE
(&
äom
, 
this
);

367 ià(
	gäom
.
	g_has_b™s_
[0 / 32] & (0xffu << (0 % 32))) {

368 ià(
	gäom
.
has_Çme
()) {

369 
£t_Çme
(
äom
.
Çme
());

371 ià(
	gäom
.
has_id
()) {

372 
£t_id
(
äom
.
id
());

374 ià(
	gäom
.
has_ema
()) {

375 
£t_ema
(
äom
.
ema
());

378 
mubË_unknown_f›lds
()->
M”geFrom
(
äom
.
unknown_f›lds
());

381 
	gPeİË
::
CİyFrom
(cÚ¡ ::
googË
::
´Ùobuf
::
Mes§ge
& 
äom
) {

382 ià(&
äom
 =ğ
this
) ;

383 
CË¬
();

384 
M”geFrom
(
äom
);

387 
	gPeİË
::
CİyFrom
(cÚ¡ 
PeİË
& 
äom
) {

388 ià(&
äom
 =ğ
this
) ;

389 
CË¬
();

390 
M”geFrom
(
äom
);

393 
boŞ
 
	gPeİË
::
IsIn™Ÿlized
() const {

394 ià((
_has_b™s_
[0] & 0x00000007è!ğ0x00000007è 
çl£
;

396  
	gŒue
;

399 
	gPeİË
::
Sw­
(
PeİË
* 
Ùh”
) {

400 ià(
Ùh”
 !ğ
this
) {

401 
¡d
::
sw­
(
Çme_
, 
Ùh”
->name_);

402 
	g¡d
::
sw­
(
id_
, 
Ùh”
->id_);

403 
	g¡d
::
sw­
(
ema_
, 
Ùh”
->email_);

404 
	g¡d
::
sw­
(
_has_b™s_
[0], 
Ùh”
->_has_bits_[0]);

405 
	g_unknown_f›lds_
.
Sw­
(&
Ùh”
->
_unknown_f›lds_
);

406 
	g¡d
::
sw­
(
_ÿched_size_
, 
Ùh”
->_cached_size_);

410 ::
googË
::
´Ùobuf
::
M‘ad©a
 
PeİË
::
G‘M‘ad©a
() const {

411 
´Ùobuf_AssignDesütÜsOnû
();

412 ::
googË
::
´Ùobuf
::
M‘ad©a
 
m‘ad©a
;

413 
	gm‘ad©a
.
	gdesütÜ
 = 
PeİË_desütÜ_
;

414 
	gm‘ad©a
.
	g»æeùiÚ
 = 
PeİË_»æeùiÚ_
;

415  
	gm‘ad©a
;

	@demo.people.pb.h

4 #iâdeà
PROTOBUF_demo_2•eİË_2•rÙo__INCLUDED


5 
	#PROTOBUF_demo_2•eİË_2•rÙo__INCLUDED


	)

7 
	~<¡ršg
>

9 
	~<googË/´Ùobuf/¡ubs/commÚ.h
>

11 #ià
GOOGLE_PROTOBUF_VERSION
 < 2004000

12 #”rÜ 
This
 
fe
 
was
 
g’”©ed
 
by
 
a
 
Ãw”
 
v”siÚ
 
of
 
´Ùoc
 
which
 
is


13 #”rÜ 
šcom·tibË
 
w™h
 
your
 
PrÙocŞ
 
Bufãr
 
h—d”s
. 
PËa£
 
upd©e


14 #”rÜ 
your
 
h—d”s
.

16 #ià2004001 < 
GOOGLE_PROTOBUF_MIN_PROTOC_VERSION


17 #”rÜ 
This
 
fe
 
was
 
g’”©ed
 
by
 
ª
 
Şd”
 
v”siÚ
 
of
 
´Ùoc
 
which
 
is


18 #”rÜ 
šcom·tibË
 
w™h
 
your
 
PrÙocŞ
 
Bufãr
 
h—d”s
. 
PËa£


19 #”rÜ 
»g’”©e
 
this
 
fe
 
w™h
 
a
 
Ãw”
 
v”siÚ
 
of
 
´Ùoc
.

22 
	~<googË/´Ùobuf/g’”©ed_mes§ge_ut.h
>

23 
	~<googË/´Ùobuf/»³©ed_f›ld.h
>

24 
	~<googË/´Ùobuf/ex‹nsiÚ_£t.h
>

25 
	~<googË/´Ùobuf/g’”©ed_mes§ge_»æeùiÚ.h
>

28 
Çme¥aû
 
	gdemo
 {

31 
´Ùobuf_AddDesc_demo_2•eİË_2•rÙo
();

32 
´Ùobuf_AssignDesc_demo_2•eİË_2•rÙo
();

33 
´Ùobuf_ShutdownFe_demo_2•eİË_2•rÙo
();

35 
şass
 
	gPeİË
;

39 şas 
	cPeİË
 : 
public
 ::
googË
::
´Ùobuf
::
Mes§ge
 {

40 
public
:

41 
PeİË
();

42 
	gvœtu®
 ~
PeİË
();

44 
PeİË
(cÚ¡ PeİË& 
äom
);

46 
šlše
 
	gPeİË
& 
	gİ”©Ü
=(cÚ¡ 
PeİË
& 
äom
) {

47 
CİyFrom
(
äom
);

48  *
	gthis
;

51 
šlše
 cÚ¡ ::
googË
::
´Ùobuf
::
UnknownF›ldS‘
& 
unknown_f›lds
() const {

52  
_unknown_f›lds_
;

55 
	gšlše
 ::
googË
::
´Ùobuf
::
UnknownF›ldS‘
* 
mubË_unknown_f›lds
() {

56  &
_unknown_f›lds_
;

59 cÚ¡ ::
googË
::
´Ùobuf
::
DesütÜ
* 
desütÜ
();

60 cÚ¡ 
	gPeİË
& 
deçuÉ_š¡ªû
();

62 
Sw­
(
PeİË
* 
Ùh”
);

66 
PeİË
* 
New
() const;

67 
CİyFrom
(cÚ¡ ::
googË
::
´Ùobuf
::
Mes§ge
& 
äom
);

68 
M”geFrom
(cÚ¡ ::
googË
::
´Ùobuf
::
Mes§ge
& 
äom
);

69 
CİyFrom
(cÚ¡ 
PeİË
& 
äom
);

70 
M”geFrom
(cÚ¡ 
PeİË
& 
äom
);

71 
CË¬
();

72 
boŞ
 
IsIn™Ÿlized
() const;

74 
By‹Size
() const;

75 
boŞ
 
M”geP¬tŸlFromCodedSŒ—m
(

76 ::
googË
::
´Ùobuf
::
io
::
CodedIÅutSŒ—m
* 
šput
);

77 
S”ŸlizeW™hCachedSizes
(

78 ::
googË
::
´Ùobuf
::
io
::
CodedOuutSŒ—m
* 
ouut
) const;

79 ::
googË
::
´Ùobuf
::
ušt8
* 
S”ŸlizeW™hCachedSizesToA¼ay
(::googË::´Ùobuf::ušt8* 
ouut
) const;

80 
G‘CachedSize
(ècÚ¡ {  
	g_ÿched_size_
; }

81 
	g´iv©e
:

82 
Sh¬edCtÜ
();

83 
Sh¬edDtÜ
();

84 
S‘CachedSize
(
size
) const;

85 
	gpublic
:

87 ::
googË
::
´Ùobuf
::
M‘ad©a
 
G‘M‘ad©a
() const;

94 
šlše
 
boŞ
 
has_Çme
() const;

95 
šlše
 
ş—r_Çme
();

96 cÚ¡ 
	gkNameF›ldNumb”
 = 1;

97 
šlše
 cÚ¡ ::
¡d
::
¡ršg
& 
Çme
() const;

98 
šlše
 
£t_Çme
(cÚ¡ ::
¡d
::
¡ršg
& 
v®ue
);

99 
šlše
 
£t_Çme
(cÚ¡ * 
v®ue
);

100 
šlše
 
£t_Çme
(cÚ¡ * 
v®ue
, 
size_t
 
size
);

101 
	gšlše
 ::
¡d
::
¡ršg
* 
mubË_Çme
();

102 
	gšlše
 ::
¡d
::
¡ršg
* 
»Ëa£_Çme
();

105 
šlše
 
boŞ
 
has_id
() const;

106 
šlše
 
ş—r_id
();

107 cÚ¡ 
	gkIdF›ldNumb”
 = 2;

108 
	gšlše
 ::
googË
::
´Ùobuf
::
št32
 
id
() const;

109 
šlše
 
£t_id
(::
googË
::
´Ùobuf
::
št32
 
v®ue
);

112 
šlše
 
boŞ
 
has_ema
() const;

113 
šlše
 
ş—r_ema
();

114 cÚ¡ 
	gkEmaF›ldNumb”
 = 3;

115 
šlše
 cÚ¡ ::
¡d
::
¡ršg
& 
ema
() const;

116 
šlše
 
£t_ema
(cÚ¡ ::
¡d
::
¡ršg
& 
v®ue
);

117 
šlše
 
£t_ema
(cÚ¡ * 
v®ue
);

118 
šlše
 
£t_ema
(cÚ¡ * 
v®ue
, 
size_t
 
size
);

119 
	gšlše
 ::
¡d
::
¡ršg
* 
mubË_ema
();

120 
	gšlše
 ::
¡d
::
¡ršg
* 
»Ëa£_ema
();

123 
	g´iv©e
:

124 
šlše
 
£t_has_Çme
();

125 
šlše
 
ş—r_has_Çme
();

126 
šlše
 
£t_has_id
();

127 
šlše
 
ş—r_has_id
();

128 
šlše
 
£t_has_ema
();

129 
šlše
 
ş—r_has_ema
();

131 ::
googË
::
´Ùobuf
::
UnknownF›ldS‘
 
_unknown_f›lds_
;

133 ::
¡d
::
¡ršg
* 
Çme_
;

134 ::
¡d
::
¡ršg
* 
ema_
;

135 ::
googË
::
´Ùobuf
::
št32
 
id_
;

137 
mubË
 
	g_ÿched_size_
;

138 ::
googË
::
´Ùobuf
::
ušt32
 
_has_b™s_
[(3 + 31) / 32];

140 
ä›nd
 
´Ùobuf_AddDesc_demo_2•eİË_2•rÙo
();

141 
ä›nd
 
´Ùobuf_AssignDesc_demo_2•eİË_2•rÙo
();

142 
ä›nd
 
´Ùobuf_ShutdownFe_demo_2•eİË_2•rÙo
();

144 
In™AsDeçuÉIn¡ªû
();

145 
PeİË
* 
	gdeçuÉ_š¡ªû_
;

155 
šlše
 
boŞ
 
	gPeİË
::
	$has_Çme
() const {

156  (
_has_b™s_
[0] & 0x00000001u) != 0;

157 
	}
}

158 
šlše
 
	gPeİË
::
	$£t_has_Çme
() {

159 
_has_b™s_
[0] |= 0x00000001u;

160 
	}
}

161 
šlše
 
	gPeİË
::
	$ş—r_has_Çme
() {

162 
_has_b™s_
[0] &= ~0x00000001u;

163 
	}
}

164 
šlše
 
	gPeİË
::
	$ş—r_Çme
() {

165 ià(
Çme_
 !ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

166 
Çme_
->
	`ş—r
();

168 
	`ş—r_has_Çme
();

169 
	}
}

170 
šlše
 cÚ¡ ::
¡d
::
¡ršg
& 
PeİË
::
	$Çme
() const {

171  *
Çme_
;

172 
	}
}

173 
šlše
 
	gPeİË
::
£t_Çme
(cÚ¡ ::
¡d
::
¡ršg
& 
v®ue
) {

174 
£t_has_Çme
();

175 ià(
	gÇme_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

176 
Çme_
 = 
Ãw
 ::
¡d
::
¡ršg
;

178 
	gÇme_
->
assign
(
v®ue
);

180 
šlše
 
	gPeİË
::
	$£t_Çme
(cÚ¡ * 
v®ue
) {

181 
	`£t_has_Çme
();

182 ià(
Çme_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

183 
Çme_
 = 
Ãw
 ::
¡d
::
¡ršg
;

185 
Çme_
->
	`assign
(
v®ue
);

186 
	}
}

187 
šlše
 
	gPeİË
::
	$£t_Çme
(cÚ¡ * 
v®ue
, 
size_t
 
size
) {

188 
	`£t_has_Çme
();

189 ià(
Çme_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

190 
Çme_
 = 
Ãw
 ::
¡d
::
¡ršg
;

192 
Çme_
->
	`assign
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
v®ue
), 
size
);

193 
	}
}

194 
	gšlše
 ::
¡d
::
¡ršg
* 
PeİË
::
	$mubË_Çme
() {

195 
	`£t_has_Çme
();

196 ià(
Çme_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

197 
Çme_
 = 
Ãw
 ::
¡d
::
¡ršg
;

199  
Çme_
;

200 
	}
}

201 
	gšlše
 ::
¡d
::
¡ršg
* 
PeİË
::
	$»Ëa£_Çme
() {

202 
	`ş—r_has_Çme
();

203 ià(
Çme_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

204  
NULL
;

206 ::
¡d
::
¡ršg
* 
‹mp
 = 
Çme_
;

207 
Çme_
 = 
cÚ¡_ÿ¡
< ::
¡d
::
¡ršg
*>(&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
);

208  
‹mp
;

210 
	}
}

213 
šlše
 
boŞ
 
	gPeİË
::
	$has_id
() const {

214  (
_has_b™s_
[0] & 0x00000002u) != 0;

215 
	}
}

216 
šlše
 
	gPeİË
::
	$£t_has_id
() {

217 
_has_b™s_
[0] |= 0x00000002u;

218 
	}
}

219 
šlše
 
	gPeİË
::
	$ş—r_has_id
() {

220 
_has_b™s_
[0] &= ~0x00000002u;

221 
	}
}

222 
šlše
 
	gPeİË
::
	$ş—r_id
() {

223 
id_
 = 0;

224 
	`ş—r_has_id
();

225 
	}
}

226 
	gšlše
 ::
googË
::
´Ùobuf
::
št32
 
PeİË
::
	$id
() const {

227  
id_
;

228 
	}
}

229 
šlše
 
	gPeİË
::
£t_id
(::
googË
::
´Ùobuf
::
št32
 
v®ue
) {

230 
£t_has_id
();

231 
	gid_
 = 
v®ue
;

235 
šlše
 
boŞ
 
	gPeİË
::
	$has_ema
() const {

236  (
_has_b™s_
[0] & 0x00000004u) != 0;

237 
	}
}

238 
šlše
 
	gPeİË
::
	$£t_has_ema
() {

239 
_has_b™s_
[0] |= 0x00000004u;

240 
	}
}

241 
šlše
 
	gPeİË
::
	$ş—r_has_ema
() {

242 
_has_b™s_
[0] &= ~0x00000004u;

243 
	}
}

244 
šlše
 
	gPeİË
::
	$ş—r_ema
() {

245 ià(
ema_
 !ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

246 
ema_
->
	`ş—r
();

248 
	`ş—r_has_ema
();

249 
	}
}

250 
šlše
 cÚ¡ ::
¡d
::
¡ršg
& 
PeİË
::
	$ema
() const {

251  *
ema_
;

252 
	}
}

253 
šlše
 
	gPeİË
::
£t_ema
(cÚ¡ ::
¡d
::
¡ršg
& 
v®ue
) {

254 
£t_has_ema
();

255 ià(
	gema_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

256 
ema_
 = 
Ãw
 ::
¡d
::
¡ršg
;

258 
	gema_
->
assign
(
v®ue
);

260 
šlše
 
	gPeİË
::
	$£t_ema
(cÚ¡ * 
v®ue
) {

261 
	`£t_has_ema
();

262 ià(
ema_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

263 
ema_
 = 
Ãw
 ::
¡d
::
¡ršg
;

265 
ema_
->
	`assign
(
v®ue
);

266 
	}
}

267 
šlše
 
	gPeİË
::
	$£t_ema
(cÚ¡ * 
v®ue
, 
size_t
 
size
) {

268 
	`£t_has_ema
();

269 ià(
ema_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

270 
ema_
 = 
Ãw
 ::
¡d
::
¡ršg
;

272 
ema_
->
	`assign
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
v®ue
), 
size
);

273 
	}
}

274 
	gšlše
 ::
¡d
::
¡ršg
* 
PeİË
::
	$mubË_ema
() {

275 
	`£t_has_ema
();

276 ià(
ema_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

277 
ema_
 = 
Ãw
 ::
¡d
::
¡ršg
;

279  
ema_
;

280 
	}
}

281 
	gšlše
 ::
¡d
::
¡ršg
* 
PeİË
::
	$»Ëa£_ema
() {

282 
	`ş—r_has_ema
();

283 ià(
ema_
 =ğ&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
) {

284  
NULL
;

286 ::
¡d
::
¡ršg
* 
‹mp
 = 
ema_
;

287 
ema_
 = 
cÚ¡_ÿ¡
< ::
¡d
::
¡ršg
*>(&::
googË
::
´Ùobuf
::
š‹º®
::
kEm±ySŒšg
);

288  
‹mp
;

290 
	}
}

297 #iâdeà
SWIG


298 
Çme¥aû
 
	ggoogË
 {

299 
Çme¥aû
 
	g´Ùobuf
 {

	@zeromq_client.cc

1 
	~<zmq.h
>

2 
	~<¡dio.h
>

3 
	~<uni¡d.h
>

4 
	~<io¡»am
>

5 
	~<¡ršg
>

7 
	~"demo.³İË.pb.h
"

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
	$maš
( )

13 *
cÚ‹xt
 = 
	`zmq_š™
( 1 );

14 *
»que¡
 = 
	`zmq_sock‘
Ğ
cÚ‹xt
, 
ZMQ_REQ
 );

15 
	`zmq_cÚÃù
(

16 
	}
}

	@zeromq_help.h

20 #iâdeà 
__ZEROMQ_HELP_H_


21 
	#__ZEROMQ_HELP_H_


	)

33 
	~<zmq.h
>

35 
	~<¡dšt.h
>

36 
	~<¡dio.h
>

37 
	~<¡dlib.h
>

38 
	~<¡d¬g.h
>

39 
	~<¡ršg.h
>

40 
	~<sys/time.h
>

41 
	~<time.h
>

42 
	~<uni¡d.h
>

43 
	~<as£¹.h
>

44 
	~<sigÇl.h
>

47 #ià
ZMQ_VERSION_MAJOR
 == 2

48 #ià
ZMQ_VERSION_MINOR
 == 0

51 #–ià
ZMQ_VERSION_MAJOR
 == 3

54 #iâdeà
ZMQ_ROUTER


55 
	#ZMQ_ROUTER
 
ZMQ_ROUTER


	)

57 #iâdeà
ZMQ_DEALER


58 
	#ZMQ_DEALER
 
ZMQ_DEALER


	)

63 #ià(
defšed
 (
__WINDOWS__
))

64 
	#¿ndof
(
num
è(è((èÒumè* 
	`¿nd
 (è/ (
RAND_MAX
 + 1.0))

	)

66 
	#¿ndof
(
num
è(è((èÒumè* 
	`¿ndom
 (è/ (
RAND_MAX
 + 1.0))

	)

74 
	$s_»cv
 (*
sock‘
) {

75 
zmq_msg_t
 
mes§ge
;

76 
	`zmq_msg_š™
 (&
mes§ge
);

77 ià(
	`zmq_»cv
 (
sock‘
, &
mes§ge
, 0))

78  (
NULL
);

79 
size
 = 
	`zmq_msg_size
 (&
mes§ge
);

80 *
¡ršg
 = 
	`m®loc
 (
size
 + 1);

81 
	`memıy
 (
¡ršg
, 
	`zmq_msg_d©a
 (&
mes§ge
), 
size
);

82 
	`zmq_msg_şo£
 (&
mes§ge
);

83 
¡ršg
 [
size
] = 0;

84  (
¡ršg
);

85 
	}
}

89 
	$s_£nd
 (*
sock‘
, *
¡ršg
) {

90 
rc
;

91 
zmq_msg_t
 
mes§ge
;

92 
	`zmq_msg_š™_size
 (&
mes§ge
, 
	`¡¾’
 (
¡ršg
));

93 
	`memıy
 (
	`zmq_msg_d©a
 (&
mes§ge
), 
¡ršg
, 
	`¡¾’
 (string));

94 
rc
 = 
	`zmq_£nd
 (
sock‘
, &
mes§ge
, 0);

95 
	`zmq_msg_şo£
 (&
mes§ge
);

96  (
rc
);

97 
	}
}

101 
	$s_£ndmÜe
 (*
sock‘
, *
¡ršg
) {

102 
rc
;

103 
zmq_msg_t
 
mes§ge
;

104 
	`zmq_msg_š™_size
 (&
mes§ge
, 
	`¡¾’
 (
¡ršg
));

105 
	`memıy
 (
	`zmq_msg_d©a
 (&
mes§ge
), 
¡ršg
, 
	`¡¾’
 (string));

106 
rc
 = 
	`zmq_£nd
 (
sock‘
, &
mes§ge
, 
ZMQ_SNDMORE
);

107 
	`zmq_msg_şo£
 (&
mes§ge
);

108  (
rc
);

109 
	}
}

114 
	$s_dump
 (*
sock‘
)

116 
	`puts
 ("----------------------------------------");

119 
zmq_msg_t
 
mes§ge
;

120 
	`zmq_msg_š™
 (&
mes§ge
);

121 
	`zmq_»cv
 (
sock‘
, &
mes§ge
, 0);

124 *
d©a
 = 
	`zmq_msg_d©a
 (&
mes§ge
);

125 
size
 = 
	`zmq_msg_size
 (&
mes§ge
);

126 
is_‹xt
 = 1;

127 
ch¬_nbr
;

128 
ch¬_nbr
 = 0; ch¬_nb¸< 
size
; char_nbr++)

129 ià((è
d©a
 [
ch¬_nbr
] < 32

130 || (è
d©a
 [
ch¬_nbr
] > 127)

131 
is_‹xt
 = 0;

133 
	`´štf
 ("[%03d] ", 
size
);

134 
ch¬_nbr
 = 0; ch¬_nb¸< 
size
; char_nbr++) {

135 ià(
is_‹xt
)

136 
	`´štf
 ("%c", 
d©a
 [
ch¬_nbr
]);

138 
	`´štf
 ("%02X", (è
d©a
 [
ch¬_nbr
]);

140 
	`´štf
 ("\n");

142 
št64_t
 
mÜe
;

143 
size_t
 
mÜe_size
 =  (
mÜe
);

144 
	`zmq_g‘sockİt
 (
sock‘
, 
ZMQ_RCVMORE
, &
mÜe
, &
mÜe_size
);

145 
	`zmq_msg_şo£
 (&
mes§ge
);

146 ià(!
mÜe
)

149 
	}
}

154 
	$s_£t_id
 (*
sock‘
)

156 
id’t™y
 [10];

157 
	`¥rštf
 (
id’t™y
, "%04X-%04X", 
	`¿ndof
 (0x10000),„andof (0x10000));

158 
	`zmq_£tsockİt
 (
sock‘
, 
ZMQ_IDENTITY
, 
id’t™y
, 
	`¡¾’
 (identity));

159 
	}
}

164 
	$s_¦“p
 (
m£cs
)

166 #ià(
	`defšed
 (
__WINDOWS__
))

167 
	`SË•
 (
m£cs
);

169 
time¥ec
 
t
;

170 
t
.
tv_£c
 = 
m£cs
 / 1000;

171 
t
.
tv_n£c
 = (
m£cs
 % 1000) * 1000000;

172 
	`Çno¦“p
 (&
t
, 
NULL
);

174 
	}
}

177 
št64_t


178 
	$s_şock
 ()

180 #ià(
	`defšed
 (
__WINDOWS__
))

181 
SYSTEMTIME
 
¡
;

182 
	`G‘Sy¡emTime
 (&
¡
);

183  (
št64_t
è
¡
.
wSecÚd
 * 1000 + st.
wMli£cÚds
;

185 
timev®
 
tv
;

186 
	`g‘timeofday
 (&
tv
, 
NULL
);

187  (
št64_t
è(
tv
.
tv_£c
 * 1000 +v.
tv_u£c
 / 1000);

189 
	}
}

195 
	$s_cÚsŞe
 (cÚ¡ *
fÜm©
, ...)

197 
time_t
 
cu¹ime
 = 
	`time
 (
NULL
);

198 
tm
 *
loùime
 = 
	`loÿÉime
 (&
cu¹ime
);

199 *
fÜm©‹d
 = 
	`m®loc
 (20);

200 
	`¡ráime
 (
fÜm©‹d
, 20, "%y-%m-%d %H:%M:%S ", 
loùime
);

201 
	`´štf
 ("%s", 
fÜm©‹d
);

202 
	`ä“
 (
fÜm©‹d
);

204 
va_li¡
 
¬g±r
;

205 
	`va_¡¬t
 (
¬g±r
, 
fÜm©
);

206 
	`v´štf
 (
fÜm©
, 
¬g±r
);

207 
	`va_’d
 (
¬g±r
);

208 
	`´štf
 ("\n");

209 
	}
}

	@zeromq_server.cc

1 
	~<zmq.h
>

2 
	~<¡dio.h
>

3 
	~<uni¡d.h
>

4 
	~<io¡»am
>

5 
	~<¡ršg
>

7 
	~"demo.³İË.pb.h
"

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
	$maš
( )

13 *
cÚ‹xt
 = 
	`zmq_š™
(1);

14 *
»¥Úd”
 = 
	`zmq_sock‘
Ğ
cÚ‹xt
, 
ZMQ_REQ
 );

15 
	`zmq_bšd
Ğ
»¥Úd”
, "tcp://*:5555" );

17 
demo
::
PeİË
 
³İË
;

18 
zmq_msg_t
 
»que¡
;

19 
	`zmq_msg_š™
Ğ&
»que¡
 );

20 
	`zmq_»cv
Ğ
»¥Úd”
, &
»que¡
, 0 );

21 
¡d
::
¡ršg
 
·ck
 = (*è
	`zmq_msg_d©a
Ğ&
»que¡
 );

22 
³İË
.
	`P¬£FromSŒšg
Ğ
·ck
 );

23 
	`zmq_msg_şo£
Ğ&
»que¡
 );

25 
	`¦“p
(1);

27 
zmq_msg_t
 
»¶y
;

28 
	`zmq_msg_š™_size
Ğ&
»¶y
, 5 );

29 
	`memıy
Ğ
	`zmq_msg_d©a
Ğ&
»¶y
 ), "World", 5 );

30 
	`zmq_£nd
Ğ
»¥Úd”
, &
»¶y
, 0 );

31 
	`zmq_msg_şo£
Ğ&
»¶y
 );

34 
	`zmq_şo£
Ğ
»¥Úd”
 );

35 
	`zmq_‹rm
Ğ
cÚ‹xt
 );

37 
	}
}

	@zmq_client.lua

1 
	g»quœe
 "zmq"

2 
loÿl
 
	gcÚ‹xt
 = 
zmq
.
š™
( 1 )

4 
´št
( "connecto hello world server..." )

5 
loÿl
 
sock‘
 = 
cÚ‹xt
:
	$sock‘
Ğ
zmq
.
REQ
 )

6 
sock‘
:
	`cÚÃù
( "tcp://localhost:5555" )

7 
n
=1,10 do

8 
	`´št
Ğ"S’dšg H–lØ".. 
n
 .. " ..." )

9 
sock‘
:
	`£nd
( "Hello" )

10 
loÿl
 
»¶y
 = 
sock‘
:
	$»cv
( )

11 
	`´št
Ğ"Reûived WÜld ".. 
n
 .. " ["..
»¶y
.."]" )

12 
’d


14 
sock‘
:
	$şo£
( )

15 
cÚ‹xt
:
	`‹rm
( )

	@
1
.
0
6
98
demo.people.pb.cc
demo.people.pb.h
zeromq_client.cc
zeromq_help.h
zeromq_server.cc
zmq_client.lua
